# review-pull-request-service

Внутри команды требуется единый микросервис, который автоматически назначает ревьюеров на Pull Request’ы (PR), а также позволяет управлять командами и участниками. Взаимодействие происходит исключительно через HTTP API.

## Используемые технологии

- **Go 1.23** - основной язык

- Для лучших результатов при нагрузочном тестировании я решил использовать Fiber
- Получение и валидация данных из конфигов с помощью cleanenv
- Логгирование в проекте через Zerolog

## Запуск

1. Клонирование репозитория

2. Содержание базового `.env` файла:
```bash
# Запуск сервиса
PORT=8080

# Контейнер PostgreSQL
POSTGRES_USER=service
POSTGRES_PASSWORD=dont_forget_password
POSTGRES_DB=review_prs

# Подключение приложения к БД
DB_HOST=db
DB_PORT=5432
DB_USER=${POSTGRES_USER}
DB_PASSWORD=${POSTGRES_PASSWORD}
DB_NAME=${POSTGRES_DB}
DB_SSL=disable
```

3. Собрать и запустить сервис
```bash
docker compose up
```

4. Приложение будет доступно на порту 8080

## Подробнее о реализации

- Использовал популярную конфигурацию Golden конфиг для golangci-lint

### Структура проекта

- `cmd/app` — **точка входа**, здесь инициализируется приложение: загрузка конфигурации, подключение к БД, настройка роутов и запуск HTTP-сервера.

### БД и Миграции

Для управления схемой БД используется **golang-migrate**
- Все миграции хранятся в папке `migrations`
- Миграции запускаются через отдельный контейнер в `docker-compose` (сервис `migrate`).
- При старте проекта:
    1. Сначала поднимается контейнер с PostgreSQL (`db`).
    2. После успешного `healthcheck` применяется команда `migrate up`.
    3. Только после этого запускается приложение (`app`).
